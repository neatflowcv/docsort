# docsort 요구사항 정의서

## 개요

Markdown 문서를 자동으로 분류하고 정리하는 CLI 도구

## 핵심 요구사항

### 대상

- Markdown 파일 (.md)
- 추후 다른 형식 확장 고려

### 분류 방식

- **하이브리드 접근**
  - 임베딩 모델로 문서 군집화 (비용 절감)
  - LLM으로 폴더 이름 결정 (군집당 한 번만 호출)
- 카테고리 수: 자동 결정
- 폴더 구조: 계층적 (예: `개발/백엔드/Go`)

### 임베딩 모델

- 로컬 모델 지원 (무료, GPU 없이 동작)
- 외부 API 지원 (OpenAI 등)
- 둘 다 지원하여 사용자 선택 가능

### 용어집

- 형식: 단순 목록 (예: `개발`, `일상`, `독서노트`)
- LLM이 폴더명 결정 시 용어집 참조
- 용어집 자동 생성 커맨드 제공

## 동작 모드

### 1. 초기 정리 (organize)

- 대량의 파일을 한 번에 분류
- 새로운 디렉토리 구조 생성
- 옵션:
  - `--fresh`: 기존 폴더 구조 완전 무시
  - `--preserve`: 기존 폴더 구조 최대한 유지

### 2. 점진적 추가 (add)

- 새 파일 추가 시 기존 구조에 맞게 배치
- 파일 단위로 실행

## CLI 인터페이스

```bash
docsort init                              # 용어집 생성
docsort organize [--fresh|--preserve] [--dry-run]  # 전체 정리
docsort add <file> [--dry-run]            # 새 파일 추가
```

## 기능 요구사항

| 기능                    | 지원 여부            |
| ----------------------- | -------------------- |
| dry-run (미리보기)      | O                    |
| rollback (되돌리기)     | X                    |
| 심볼릭 링크 (다중 폴더) | X                    |
| 다중 주제 문서          | 하나의 폴더에만 배치 |

## 기술 스택

| 항목            | 선택                                |
| --------------- | ----------------------------------- |
| 프로그래밍 언어 | Go                                  |
| 실행 환경       | 로컬 (GPU 없음)                     |
| 설정 파일       | `.docsort.yaml` (프로젝트 디렉토리) |

## 데이터 특성

- 파일 수: 약 2,000개 (증가 예정)
- 언어: 한국어 위주, 영어 일부
- 현재 상태: 폴더 존재하나 정리 기준 불일치

## 설정 파일 (.docsort.yaml)

저장 항목:

- API 키
- 임베딩 모델 선택
- 용어집 경로
- 기타 설정

---

*이 문서는 소크라테스식 질문을 통해 도출된 요구사항입니다.*
